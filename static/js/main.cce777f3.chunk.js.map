{"version":3,"sources":["components/decorator/decorator.tsx","utils/websocket-impl.ts","hooks/use-webhook.ts","components/dashboard/use-dashboard-control.ts","hooks/use-onmount.ts","components/grid-list/grid-list.tsx","redux/tabs.ts","redux/index.ts","hocs/visible-if.tsx","components/dashboard/dashboard-liste.tsx","components/temagruppe-valg/temagruppe-valg.tsx","components/dashboard/veileder.svg","components/dashboard/dashboard-fremside.tsx","components/dashboard/dashboard.tsx","hooks/use-objectstate.ts","components/persontab/chatwindow.tsx","components/persontab/persontab.tsx","components/tabviewer/tabviewer.tsx","application.tsx","index.tsx","mock/context-mock.ts","mock/utils.ts","mock/dashboard-mock.ts","mock/index.ts","utils/temagruppe-utils.ts"],"names":["InternflateDecorator","NAVSPA","importer","Decorator","appname","Status","fuzzy","min","max","diff","Math","round","random","WebSocketImpl","wsUrl","listeners","status","connection","resettimer","retrytimer","retryCounter","this","INIT","CLOSE","print","WebSocket","addEventListener","onWSOpen","bind","onWSMessage","onWSError","onWSClose","clearResetTimer","clearRetryTimer","close","event","delay","window","setTimeout","REFRESH","OPEN","onOpen","onMessage","onError","tryCount","Number","MAX_SAFE_INTEGER","pow","open","onClose","clearTimeout","process","REACT_APP_MOCK","args","console","log","wsContext","state","url","listener","push","ws","createListener","wsstate","newListeners","filter","l","length","method","forEach","broadcast","useDashboardControl","effect","useState","setState","setConnection","fetch","then","resp","json","useEffect","wsListeners","useMemo","data","JSON","parse","currentState","type","id","time","Date","temagruppe","fnr","ident","undefined","index","findIndex","e","newState","splice","register","unregister","requests","ARBD","wsevent","Temagruppe","Arbeid","FMLI","Familie","HJLPM","Hjelpemiddel","OVRG","Ovrig","PENS","Pensjon","GridList","TabType","props","className","gridTemplateColumns","columns","map","column","width","join","headerItems","tag","header","rows","item","values","formatted","format","reactElement","react","valueItems","key","ariaLabel","value","style","aria-label","classNames","isPersonTab","tab","PERSON","initialState","tabs","DASHBOARD","hasChanges","active","tabsSlice","createSlice","name","reducers","openTab","action","payload","closeTab","switchTab","markChanged","hasChange","actions","useTabs","useAppSelector","rootReducer","combineReducers","store","configureStore","reducer","useAppDispatch","useDispatch","selector","equalityFn","useSelector","visibleIfHOC","component","defaultVisibility","visibleIf","React","apneChat","dispatch","list","dashboard","toLocaleTimeString","mini","onClick","TemagruppeValg","temagrupper","Object","entries","gruppe","checked","onChange","setValue","htmlFor","temagruppeTekst","_extends","assign","target","i","arguments","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","fill","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref","svgRef","title","viewBox","ref","ForwardRef","forwardRef","fargetema","svg","Dashboard","liste","useObjectState","ChatWindow","chat","useFetch","text","setText","isPending","hasError","snakkebobler","melding","pilHoyre","from","content","label","maxLength","onKeyUp","keyCode","shiftKey","body","submit","rerun","Persontab","src","TabRenderer","activeTabId","isInactive","tabClassName","cls","aria-hidden","TabViewer","tabState","tabElements","Application","activeTab","tabselector","aktiv","require","ReactDOM","render","StrictMode","document","getElementById","enheter","enhetId","navn","jittery","start","end","fn","delta","rnd","Array","toISOString","navfaker","arrayElement","godkjenteTemagrupper","guid","personIdentifikator","f√∏dselsnummer","publish","server","stringify","send","mock","FetchMock","configure","middleware","MiddlewareUtils","combine","loggingMiddleware","Server","me","fornavn","etternavn","get","req","res","ctx","setupWsControlAndMock","controlServer","on","integer","removed","pathParams","chatRequest","find","request","chatContent","starters","followups","setupControllWsMock","ekstra","post","temagruppeNavn","Bil","OrtopediskHjelpemiddel","PleiepengerSyktBarn","Uforetrygd","Utland","OkonomiskSosial","AndreSosiale"],"mappings":"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","file":"static/js/main.cce777f3.chunk.js","sourcesContent":["import * as React from 'react';\nimport NAVSPA from '@navikt/navspa';\nimport {DecoratorProps} from \"./decoratorprops\";\n\nconst InternflateDecorator = NAVSPA.importer<DecoratorProps>('internarbeidsflatefs');\n\nfunction Decorator() {\n    return (\n        <InternflateDecorator appname=\"Modiapersonoversikt chat\"/>\n    );\n}\n\nexport default Decorator;\n","const SECONDS: number = 1000;\nconst MINUTES: number = 60 * SECONDS;\nconst MAX_RETRIES: number = 30;\n\nexport enum Status {\n    INIT,\n    OPEN,\n    CLOSE,\n    REFRESH\n}\n\nexport interface Listeners {\n    onMessage?(event: MessageEvent): void;\n    onOpen?(event: Event): void;\n    onError?(event: Event): void;\n    onClose?(event: CloseEvent): void;\n}\n\nfunction fuzzy(min: number, max: number): number {\n    const diff = max - min;\n    const rnd = Math.round(Math.random() * diff);\n    return min + rnd;\n}\n\nfunction createDelay(basedelay: number): number {\n    return basedelay + fuzzy(5 * SECONDS, 15 * SECONDS);\n}\n\nfunction createRetrytime(tryCount: number): number {\n    if (tryCount === MAX_RETRIES) {\n        return Number.MAX_SAFE_INTEGER;\n    }\n\n    const basedelay = Math.min(Math.pow(2, tryCount), 180) * SECONDS;\n    return basedelay + fuzzy(5 * SECONDS, 15 * SECONDS);\n}\n\nclass WebSocketImpl {\n    private status: Status;\n    private readonly wsUrl: string;\n    private readonly listeners: Listeners;\n    private connection?: WebSocket;\n    private resettimer?: number | null;\n    private retrytimer?: number | null;\n    private retryCounter: number = 0;\n\n    constructor(wsUrl: string, listeners: Listeners) {\n        this.wsUrl = wsUrl;\n        this.listeners = listeners;\n        this.status = Status.INIT;\n    }\n\n    public open() {\n        if (this.status === Status.CLOSE) {\n            WebSocketImpl.print('Stopping creation of WS, since it is closed');\n            return;\n        }\n        WebSocketImpl.print('Opening WS', this.wsUrl);\n        this.connection = new WebSocket(this.wsUrl);\n        this.connection.addEventListener('open', this.onWSOpen.bind(this));\n        this.connection.addEventListener('message', this.onWSMessage.bind(this));\n        this.connection.addEventListener('error', this.onWSError.bind(this));\n        this.connection.addEventListener('close', this.onWSClose.bind(this));\n    }\n\n    public close() {\n        WebSocketImpl.print('Closing WS', this.wsUrl);\n        this.clearResetTimer();\n        this.clearRetryTimer();\n        this.status = Status.CLOSE;\n        if (this.connection) {\n            this.connection.close();\n        }\n    }\n\n    public getStatus() {\n        return this.status;\n    }\n\n    private onWSOpen(event: Event) {\n        WebSocketImpl.print('open', event);\n        this.clearResetTimer();\n        this.clearRetryTimer();\n\n        const delay = createDelay(45 * MINUTES);\n        WebSocketImpl.print('Creating resettimer', delay);\n\n        this.resettimer = window.setTimeout(() => {\n            this.status = Status.REFRESH;\n            if (this.connection) {\n                this.connection.close();\n            }\n        }, delay);\n\n        this.status = Status.OPEN;\n\n        if (this.listeners.onOpen) {\n            this.listeners.onOpen(event);\n        }\n    }\n\n    private onWSMessage(event: MessageEvent) {\n        WebSocketImpl.print('message', event);\n        if (this.listeners.onMessage) {\n            this.listeners.onMessage(event);\n        }\n    }\n\n    private onWSError(event: Event) {\n        WebSocketImpl.print('error', event);\n        if (this.listeners.onError) {\n            this.listeners.onError(event);\n        }\n    }\n\n    private onWSClose(event: CloseEvent) {\n        WebSocketImpl.print('close', event);\n        if (this.status === Status.REFRESH) {\n            this.open();\n            return;\n        }\n\n        if (this.status !== Status.CLOSE) {\n            const delay = createRetrytime(this.retryCounter++);\n            WebSocketImpl.print('Creating retrytimer', delay);\n\n            this.retrytimer = window.setTimeout(this.open.bind(this), delay);\n        }\n        if (this.listeners.onClose) {\n            this.listeners.onClose(event);\n        }\n    }\n\n    private clearResetTimer() {\n        if (this.resettimer) {\n            window.clearTimeout(this.resettimer);\n        }\n        this.resettimer = null;\n    }\n\n    private clearRetryTimer() {\n        if (this.retrytimer) {\n            window.clearTimeout(this.retrytimer);\n        }\n        this.retrytimer = null;\n        this.retryCounter = 0;\n    }\n\n    private static print(...args: any[]) {\n        if (process.env.REACT_APP_MOCK === 'true') {\n            console.log('WS:', ...args); // tslint:disable-line\n        }\n    }\n}\n\nexport default WebSocketImpl;\n","import WebSocket, { Listeners } from './../utils/websocket-impl';\nimport { useEffect } from 'react';\n\ntype WSState = {\n    [key: string]: {\n        ws: WebSocket;\n        listeners: Array<Listeners>;\n    };\n};\ntype BroadcaseMethod = 'onMessage' | 'onClose' | 'onOpen' | 'onError';\n\nclass WSContext {\n    state: WSState = {};\n\n    register(url: string, listener: Listeners) {\n        if (this.state[url]) {\n            this.state[url].listeners.push(listener);\n        } else {\n            const ws = new WebSocket(url, this.createListener(url));\n            ws.open();\n            this.state[url] = {\n                ws,\n                listeners: [listener]\n            };\n        }\n    }\n\n    unregister(url: string, listener: Listeners) {\n        if (!this.state[url]) {\n            return;\n        }\n        const wsstate = this.state[url];\n        const newListeners = wsstate.listeners.filter((l) => l !== listener);\n\n        wsstate.listeners = newListeners;\n        if (newListeners.length === 0) {\n            wsstate.ws.close();\n            delete this.state[url];\n        }\n    }\n\n    private broadcast(method: BroadcaseMethod, url: string, event: Event) {\n        if (this.state[url]) {\n            const wsstate = this.state[url];\n            if (method === 'onMessage') {\n                wsstate.listeners.forEach(\n                    (listener) => listener.onMessage && listener.onMessage(event as MessageEvent)\n                );\n            } else if (method === 'onClose') {\n                wsstate.listeners.forEach(\n                    (listener) => listener.onClose && listener.onClose(event as CloseEvent)\n                );\n            } else {\n                wsstate.listeners.forEach(\n                    (listener) => listener[method] && listener[method]!(event)\n                );\n            }\n        }\n    }\n\n    private createListener(url: string): Listeners {\n        return {\n            onOpen: (event) => this.broadcast('onOpen', url, event),\n            onMessage: (event) => this.broadcast('onMessage', url, event),\n            onClose: (event) => this.broadcast('onClose', url, event),\n            onError: (event) => this.broadcast('onError', url, event)\n        };\n    }\n}\nconst wsContext: WSContext = new WSContext();\n\nexport function useWebsocket(url: string | null | undefined, listeners: Listeners) {\n    useEffect(() => {\n        if (!url) {\n            return;\n        }\n        wsContext.register(url, listeners);\n        return () => wsContext.unregister(url, listeners);\n    }, [url, listeners]);\n}\n","import {useMemo, useState} from \"react\";\nimport {WSEvent} from \"./types\";\nimport {useOnMount} from \"../../hooks/use-onmount\";\nimport {useWebsocket} from \"../../hooks/use-webhook\";\nimport {Temagruppe} from \"../../utils/temagruppe-utils\";\nimport {Listeners} from \"../../utils/websocket-impl\";\n\nexport type WSRequest = {\n    temagruppe: Temagruppe;\n    time: Date;\n    id: string;\n    fnr: string;\n    ident: string | undefined;\n}\n\nexport type GodkjentTemagruppe =\n    | typeof Temagruppe.Arbeid\n    | typeof Temagruppe.Familie\n    | typeof Temagruppe.Hjelpemiddel\n    | typeof Temagruppe.Pensjon\n    | typeof Temagruppe.Ovrig;\n\nexport type DashboardControl = {\n    connection: boolean;\n    requests: Record<GodkjentTemagruppe, Array<WSRequest>>;\n}\n\nexport function useDashboardControl(): DashboardControl {\n    const [state, setState] = useState<Array<WSRequest>>([]);\n    const [connection, setConnection] = useState<boolean>(false);\n    useOnMount(() => {\n        fetch('/modiapersonoversikt-chat/api/control')\n            .then((resp) => resp.json())\n            .then((json) => {\n                setState(json)\n            });\n    });\n\n    const wsListeners: Listeners = useMemo(() => ({\n        onMessage(event: MessageEvent): void {\n            const data = JSON.parse(event.data) as WSEvent;\n            setState((currentState) => {\n                if (data.type === 'REQUEST') {\n                    return [...currentState, {\n                        id: data.id,\n                        time: new Date(),\n                        temagruppe: data.temagruppe,\n                        fnr: data.fnr,\n                        ident: undefined\n                    }];\n                } else if (data.type === 'APPROVED') {\n                    const index = currentState.findIndex((e) => e.id === data.id);\n                    const newState = [...currentState];\n                    newState[index].ident = data.ident;\n                    return newState;\n                } else if (data.type === 'CLOSE') {\n                    const index = currentState.findIndex((e) => e.id === data.id);\n                    const newState = [...currentState];\n                    newState.splice(index, 1);\n                    return newState;\n                } else {\n                    return currentState;\n                }\n            });\n        },\n        onOpen(event: Event) {\n            setConnection(true);\n        },\n        onClose(event: CloseEvent) {\n            setConnection(false);\n        },\n        onError(event: Event) {\n            setConnection(false);\n        }\n    }), [setState]);\n\n    useWebsocket('wss://app-q0.adeo.no/modiapersonoversikt-chat/api/control-ws', wsListeners);\n\n    const requests = useMemo(() => ({\n        ARBD: state.filter((wsevent) => wsevent.temagruppe === Temagruppe.Arbeid),\n        FMLI: state.filter((wsevent) => wsevent.temagruppe === Temagruppe.Familie),\n        HJLPM: state.filter((wsevent) => wsevent.temagruppe === Temagruppe.Hjelpemiddel),\n        OVRG: state.filter((wsevent) => wsevent.temagruppe === Temagruppe.Ovrig),\n        PENS: state.filter((wsevent) => wsevent.temagruppe === Temagruppe.Pensjon),\n    }), [state]);\n\n    return useMemo(() => ({ connection, requests }), [connection, requests]);\n}\n","import {EffectCallback, useEffect} from \"react\";\n\nexport function useOnMount(effect: EffectCallback) {\n    useEffect(effect, []);\n}\n","import * as React from 'react';\nimport classNames from \"classnames\";\nimport {Element, Normaltekst} from 'nav-frontend-typografi';\nimport './grid-list.less';\n\nconst cls = (className?: string) => classNames('grid-list', className);\ntype Column<DATA> = {\n    header: string;\n    format(value: DATA): string | undefined;\n    react?: (value: DATA) => React.ReactNode;\n    width?: string;\n}\ntype Props<DATA> = {\n    className?: string;\n    columns: Array<Column<DATA>>;\n    data: Array<DATA>;\n}\n\nfunction GridList<DATA extends {}>(props: Props<DATA>) {\n    const gridTemplateColumns = {gridTemplateColumns: props.columns.map((column) => column.width ?? '1fr').join(' ')};\n\n    const headerItems = props.columns.map((column) => (\n        <Element tag=\"div\" className=\"grid-list__header-item\">\n            {column.header}\n        </Element>\n    ));\n\n    const rows = props.data.map((item, index) => {\n        const values = props.columns.map((column) => ({\n            header: column.header,\n            formatted: column.format(item),\n            reactElement: column.react ? column.react(item) : column.format(item)\n        }));\n        const valueItems = values.map(({ reactElement }, index) => (\n            <Normaltekst key={index} tag=\"div\" className=\"grid-liste__row-item\">\n                {reactElement}\n            </Normaltekst>\n        ));\n\n        const ariaLabel = values\n            .filter(({ formatted }) => formatted)\n            .map((value) => `${value.header}: ${value.formatted}`).join(' ');\n\n        return (\n            <div key={index} className=\"grid-list__row\" style={gridTemplateColumns} aria-label={ariaLabel}>\n                {valueItems}\n            </div>\n        )\n    });\n\n    return (\n        <section className={cls(props.className)}>\n            <header className=\"grid-list__header\" style={gridTemplateColumns}>{headerItems}</header>\n            {rows}\n        </section>\n    );\n}\n\nexport default GridList;\n","import {createSlice, PayloadAction} from '@reduxjs/toolkit';\nimport {useAppSelector} from \"./index\";\n\n\nexport type TabId = string;\n\nexport enum TabType {\n    DASHBOARD, PERSON\n}\n\ntype TabBase<TYPE extends TabType> = { id: TabId; type: TYPE; hasChanges: boolean; }\n\nexport type DashboardTab = TabBase<TabType.DASHBOARD>\nexport type PersonTab = TabBase<TabType.PERSON> & { fnr: string; }\nexport type Tab = DashboardTab | PersonTab;\n\nexport function isPersonTab(tab: Tab): tab is PersonTab {\n    return tab.type === TabType.PERSON;\n}\n\nexport type TabsState = {\n    tabs: {\n        [key: string]: Tab\n    };\n    active: TabId;\n}\n\nconst initialState: TabsState = {\n    tabs: {\n        'DASHBOARD': {id: 'DASHBOARD', type: TabType.DASHBOARD, hasChanges: false}\n    },\n    active: 'DASHBOARD'\n};\n\nconst tabsSlice = createSlice({\n    name: 'tabs',\n    initialState,\n    reducers: {\n        openTab(state, action: PayloadAction<PersonTab>) {\n            const tab: Tab = action.payload;\n            state.tabs[tab.id] = tab;\n        },\n        closeTab(state, action: PayloadAction<TabId>) {\n            const id: TabId = action.payload;\n            delete state.tabs[id];\n        },\n        switchTab(state, action: PayloadAction<TabId>) {\n            state.active = action.payload;\n        },\n        markChanged(state, action: PayloadAction<{ id: TabId; hasChange: boolean; }>) {\n            if (state.tabs[action.payload.id]) {\n                state.tabs[action.payload.id].hasChanges = action.payload.hasChange;\n            }\n        }\n    }\n});\n\nexport const { openTab, closeTab, switchTab, markChanged } = tabsSlice.actions;\nexport default tabsSlice.reducer;\nexport const useTabs = () => useAppSelector(state => state.tabs);\n","import { configureStore, combineReducers, Action } from '@reduxjs/toolkit';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { ThunkAction } from 'redux-thunk';\nimport tabs from './tabs';\n\nconst rootReducer = combineReducers({\n    tabs\n});\n\nconst store = configureStore({\n    reducer: rootReducer,\n});\n\nexport default store;\nexport type RootState = ReturnType<typeof rootReducer>;\nexport type AppDispatch = typeof store.dispatch;\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector =\n    <TSelected = unknown>(selector: (state: RootState) => TSelected, equalityFn?: (left: TSelected, right: TSelected) => boolean): TSelected =>\n        useSelector(selector, equalityFn);\nexport type AppThunk = ThunkAction<void, RootState, null, Action<string>>\n","import * as React from \"react\";\n\ntype AugmentetProps<PROPS> = PROPS & { visibleIf?: boolean; }\n\nfunction visibleIfHOC<PROPS>(component: React.ComponentType<PROPS>, defaultVisibility: boolean = true): React.ComponentType<AugmentetProps<PROPS>> {\n    return (props: AugmentetProps<PROPS>) => {\n        if (props.visibleIf ?? defaultVisibility) {\n            return React.createElement(component, props);\n        }\n        return null;\n    }\n}\n\nexport default visibleIfHOC;\n","import * as React from 'react';\nimport {Flatknapp} from \"nav-frontend-knapper\";\nimport {ObjectState} from \"../../hooks/use-objectstate\";\nimport {DashboardControl, GodkjentTemagruppe, WSRequest} from \"./use-dashboard-control\";\nimport GridList from \"../grid-list/grid-list\";\nimport {AppDispatch, useAppDispatch} from \"../../redux\";\nimport {openTab, PersonTab, switchTab, TabType} from \"../../redux/tabs\";\nimport visibleIfHOC from \"../../hocs/visible-if\";\n\ninterface Props {\n    temagruppe: ObjectState<GodkjentTemagruppe | undefined>;\n    dashboard: DashboardControl;\n}\n\nfunction apneChat(dispatch: AppDispatch, id: string) {\n    return () => {\n        fetch(`/modiapersonoversikt-chat/api/plukk/${id}`)\n            .then(resp => resp.json())\n            .then(json => {\n                const tab: PersonTab = {id: json.fnr, type: TabType.PERSON, fnr: json.fnr, hasChanges: false};\n                dispatch(openTab(tab));\n                dispatch(switchTab(json.fnr));\n            });\n    };\n}\n\nfunction DashboardListe(props: Props) {\n    const dispatch = useAppDispatch();\n    const list: Array<WSRequest> = props.temagruppe.value ? props.dashboard.requests[props.temagruppe.value] : []\n\n    return (\n        <GridList<WSRequest>\n            columns={[\n                {\n                    header: \"Tidspunkt\",\n                    format: (value: WSRequest) => new Date(value.time).toLocaleTimeString('nb')\n                },\n                {\n                    header: \"F√∏dselsnummer\",\n                    format: (value: WSRequest) => value.fnr\n                },\n                {\n                    header: \"Saksbehandler\",\n                    format: (value: WSRequest) => value.ident ?? '-'\n                },\n                {\n                    header: \"Plukk samtale\",\n                    format: (value: WSRequest) => undefined,\n                    react: (value: WSRequest) => (\n                        <Flatknapp mini onClick={apneChat(dispatch, value.id)}>Plukk</Flatknapp>\n                    ),\n                    width: '7rem'\n                }\n\n            ]}\n            data={list}\n        />\n    );\n}\n\nexport default visibleIfHOC(DashboardListe);\n","import * as React from 'react';\nimport {Normaltekst} from 'nav-frontend-typografi';\nimport {temagruppeTekst} from \"../../utils/temagruppe-utils\";\nimport {GodkjentTemagruppe, WSRequest} from \"../dashboard/use-dashboard-control\";\nimport './temagruppe-valg.less';\nimport {ObjectState} from \"../../hooks/use-objectstate\";\n\ninterface Props {\n    active: ObjectState<GodkjentTemagruppe | undefined>;\n    requests: Record<GodkjentTemagruppe, Array<WSRequest>>;\n}\n\n\nfunction TemagruppeValg(props: Props) {\n    const temagrupper = Object.entries(props.requests).map(([temagruppe, requests]) => {\n        const gruppe = temagruppe as GodkjentTemagruppe;\n        return (\n            <div className=\"temagruppevalg__radiovalg\" key={gruppe}>\n                <input\n                    type=\"radio\"\n                    name=\"temagruppevalg\"\n                    value={gruppe}\n                    id={`temagruppevalg-${gruppe}`}\n                    checked={props.active.value === gruppe}\n                    onChange={() => props.active.setValue(gruppe)}\n                />\n                <label htmlFor={`temagruppevalg-${temagruppe}`}>\n                    <Normaltekst tag=\"span\">\n                        {`${temagruppeTekst(gruppe)} (${requests.length} i k√∏)`}\n                    </Normaltekst>\n                </label>\n            </div>\n        );\n    });\n\n    return (\n        <div className=\"temagruppevalg\">\n            <div className=\"temagruppevalg__radiovalg\">\n                <input\n                    type=\"radio\"\n                    name=\"temagruppevalg\"\n                    value=\"N/A\"\n                    id=\"temagruppevalg-N/A\"\n                    checked={props.active.value === undefined}\n                    onChange={() => props.active.setValue(undefined)}\n                />\n                <label htmlFor=\"temagruppevalg-N/A\">\n                    <Normaltekst tag=\"span\">\n                        Ikke p√•koblet\n                    </Normaltekst>\n                </label>\n            </div>\n            {temagrupper}\n        </div>\n    )\n}\n\nexport default TemagruppeValg;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14 50.7C15 52.3 17.9 81 26.5 81S39 51.8 39 50.3c-13.2-7.6-25 .4-25 .4z\",\n  fill: \"#e7e5e2\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M38.7 50.2c6 2.9 15.3 10.9 15.3 18.3V93H0V68.5c0-7.1 8.5-14.8 14.5-18-.3.2-.5.3-.5.3 1 1.7 3.8 9.2 12.4 9.2C35 60 39 51.9 39 50.4c-.1-.1-.2-.2-.3-.2z\",\n  fill: \"#5c4378\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M46.7 76H31.2c-.7 0-1.3-.6-1.2-1.3v-8.5c0-.7.6-1.3 1.3-1.3h15.5c.7 0 1.3.6 1.3 1.3v8.5c-.1.7-.7 1.3-1.4 1.3\",\n  fill: \"#d2242a\"\n});\n\nvar _ref5 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M42.9 71c0 2.1-1.7 3.8-3.8 3.8-2.1 0-3.8-1.7-3.8-3.8s1.7-3.8 3.8-3.8c2.1 0 3.8 1.7 3.8 3.8m-8.7 1.7h-.7l.8-1.9h.7l-.8 1.9zm9.3 0H43l.8-1.9h.5l-.8 1.9zm1.2 0h-.2l.8-1.9h.2l-.8 1.9z\",\n  fill: \"#fff\"\n});\n\nvar _ref6 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M36.2 72.7h.6s.1 0 .1-.1v-1.8s0-.1-.1-.1h-.6s-.1 0-.1.1l-.2.6v.1h.2l.1 1.2c0-.1 0 0 0 0\",\n  fill: \"#c52d35\"\n});\n\nvar _ref7 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M37.5 72.7h.6s.1 0 .1-.1v-1.8s0-.1-.1-.1h-.9s-.1 0-.1.1l-.2.6-.1.1h.5c.1 0 .2.1.2.2v1c-.1-.1-.1 0 0 0m2.6-1.9h-.6s-.1 0-.1.1v1.8s0 .1.1.1h.6s.1 0 .1-.1l.2-.6V72h-.2l-.1-1.2\",\n  fill: \"#c52d35\"\n});\n\nvar _ref8 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M37.7 72.7h.4s.1 0 .1-.1l.2-.6v-.1h-.2c0 .1-.5.8-.5.8zm3.9-1.9h.7s.1 0 0 .1l-.7 1.8H41l.6-1.9\",\n  fill: \"#c52d35\"\n});\n\nvar _ref9 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M40.8 70.8h-1c-.1 0 .3.1.3.1l.7 1.7s0 .1.1.1h.6l-.7-1.9m-1.3.6v.4s-.1-.4-.3-.4c-.3 0-.3.2-.3.3 0 .1.1.3.2.3h.5l-.3.7H39c-.2 0-.9-.3-.9-.9 0-.6.5-1 .9-1 .2-.1.5.2.5.6 0-.1 0-.1 0 0z\",\n  fill: \"#c52d35\"\n});\n\nvar _ref10 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M39.9 66.7h-1.6c-.1 0-.2-.1-.2-.2v-.3c0-.1.1-.2.2-.2h1.6c.1 0 .2.1.2.2v.3c0 .2-.1.2-.2.2\",\n  fill: \"#5a1f57\"\n});\n\nvar _ref11 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M38.7 66.5h.9V64h-.9v2.5z\",\n  fill: \"#c2b5cf\"\n});\n\nvar _ref12 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M47.2 35.3C44.7 45.6 36.6 53.1 27 53.1S9.3 45.6 6.8 35.3c-.2.1-.5.1-.8.1-1.1 0-2-.8-2-1.7v-7c0-1 .9-1.7 2-1.7h.2C7.7 13.1 16.4 4 27 4c10.6 0 19.3 9.1 20.8 21h.2c1.1 0 2 .8 2 1.7v7c0 1-.9 1.7-2 1.7-.3 0-.5 0-.8-.1z\",\n  fill: \"#e7e5e2\"\n});\n\nvar _ref13 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 27.6c-1.4.1-1.9-2-1.4-3.4.1-.3.6-1.5 1.4-1.5.8 0 1.2.7 1.3.8.6 1.4.3 4-1.3 4.1m16.2 0c1.4.1 1.9-2 1.4-3.4-.1-.3-.6-1.5-1.4-1.5-.8 0-1.2.7-1.3.8-.6 1.4-.3 4 1.3 4.1\",\n  fill: \"#635e59\"\n});\n\nvar _ref14 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M26.8 34.6c-.4 0-.7-.1-1-.2-.3-.1-.4-.4-.3-.7.1-.3.4-.4.7-.3.5.2 1.5.1 2.2-.4.7-.4 1.1-1 1.2-1.5.1-.4-.1-.9-.4-1.3-.2-.2-.8-.2-1.6-.1-.3 0-.5-.1-.6-.4 0-.3.1-.5.4-.6 1.2-.2 2.1 0 2.6.6.5.7.8 1.4.6 2.1-.1.8-.7 1.6-1.7 2.2-.6.3-1.4.6-2.1.6z\",\n  fill: \"#d1bfa3\"\n});\n\nvar _ref15 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M27.1 42.1h-.3c-5.3-.2-7.3-4.1-7.4-4.3-.1-.3 0-.6.2-.7.2-.1.6 0 .7.2.1.1 1.9 3.6 6.6 3.8 4.7.2 6.4-3.7 6.4-3.7.1-.3.4-.4.7-.3.3.1.4.4.3.7-.1 0-2.1 4.3-7.2 4.3z\",\n  fill: \"#593a32\"\n});\n\nvar _ref16 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M6.6 30.7c.1-.1.1-.2.1-.3v-2c-.1-5.6 1.8-8.1 3.4-10.1 0 0-1 4.3-.3 3.4 3.8-5 21.4-1.6 25-8.1.5 3.6-4.1 4.6-4.1 4.6 3.7.7 6.9-.8 7.7-2.5.3 1.4-.6 2.4-1.9 3.4 4.5-.9 4.6-4 4.6-4 .6 4.1 5.3 2.5 5.3 9.3v6c0 .3.2.6.5.6h.5c.3 0 .5-.3.5-.6V26c.3-15.6-8.5-26-20.6-26C15.9 0 5 10.4 5 24.1v6.3c0 .4.2.6.5.6h.6c.2 0 .3-.1.5-.3\",\n  fill: \"#f6b873\"\n});\n\nvar _ref17 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M25.9 43.4c-4.4 0-8-1.4-8-3.2s3.6-3.2 8-3.2 8 1.4 8 3.2c0 1.8-3.6 3.2-8 3.2m.8-9.4c-2.9 0-4.7.7-8.8 2.1-12.7 4.6-11.6-14-11.6-14C3.4 46 18.6 52 26.5 52c8.1 0 24.1-8.1 21-30 0 0 .4 17.1-12.9 13.8-3.7-.9-5-1.8-7.9-1.8z\",\n  fill: \"#f6b873\"\n});\n\nvar SvgVeileder = function SvgVeileder(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 54 93\",\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4, _ref5, _ref6, _ref7, _ref8, _ref9, _ref10, _ref11, _ref12, _ref13, _ref14, _ref15, _ref16, _ref17);\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgVeileder, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/veileder.6b7ed5f2.svg\";\nexport { ForwardRef as ReactComponent };","import * as React from \"react\";\nimport Veilederpanel from \"nav-frontend-veilederpanel\";\nimport {ReactComponent as Veileder} from \"./veileder.svg\";\nimport {Systemtittel} from \"nav-frontend-typografi\";\nimport visibleIfHOC from \"../../hocs/visible-if\";\n\nfunction DashboardFremside() {\n    return (\n        <Veilederpanel fargetema=\"info\" svg={<Veileder />}>\n            <Systemtittel>Velg en temagruppe for √• se brukere som venter p√• svar</Systemtittel>\n        </Veilederpanel>\n    );\n}\n\nexport default visibleIfHOC(DashboardFremside);\n","import * as React from 'react';\nimport {temagruppeTekst} from \"../../utils/temagruppe-utils\";\nimport {GodkjentTemagruppe, useDashboardControl} from \"./use-dashboard-control\";\nimport DashboardListe from \"./dashboard-liste\";\nimport {useObjectState} from \"../../hooks/use-objectstate\";\nimport './dashboard.less';\nimport TemagruppeValg from \"../temagruppe-valg/temagruppe-valg\";\nimport {Innholdstittel} from \"nav-frontend-typografi\";\nimport DashboardFremside from \"./dashboard-fremside\";\n\nfunction Dashboard() {\n    const liste = useObjectState<GodkjentTemagruppe | undefined>(undefined);\n    const dashboard = useDashboardControl();\n    return (\n        <div className=\"dashboard\">\n            <div className=\"dashboard__temagrupper\">\n                <TemagruppeValg active={liste} requests={dashboard.requests}/>\n            </div>\n            <div className=\"dashboard__valgtemagruppe\">\n                {liste.value && <Innholdstittel className=\"blokk-xs\">\n                    {liste.value ? temagruppeTekst(liste.value) : 'Ikke p√•koblet'}\n                </Innholdstittel>\n                }\n            </div>\n            <div className=\"dashboard__liste\">\n                <DashboardFremside visibleIf={liste.value === undefined} />\n                <DashboardListe temagruppe={liste} dashboard={dashboard} visibleIf={liste.value !== undefined} />\n            </div>\n        </div>\n    );\n}\n\nexport default Dashboard;\n","import {Dispatch, SetStateAction, useMemo, useState} from \"react\";\n\nexport type ObjectState<S> = {\n    value: S;\n    setValue: Dispatch<SetStateAction<S>>\n}\nexport function useObjectState<S>(initialState: S | (() => S)): ObjectState<S> {\n    const [value, setValue] = useState<S>(initialState);\n\n    return useMemo(() => ({\n        value,\n        setValue\n    }), [value]);\n}\n","import useFetch, {hasError, isPending} from \"@nutgaard/use-fetch\";\nimport {default as React, useState} from \"react\";\nimport Spinner from \"nav-frontend-spinner\";\nimport Snakkeboble from \"nav-frontend-snakkeboble\";\nimport {Textarea} from \"nav-frontend-skjema\";\n\nfunction submit(fnr: string, text: string): Promise<any> {\n    return fetch(`/modiapersonoversikt-chat/api/chat/${fnr}/send`, {\n        method: 'POST',\n        body: text\n    });\n}\n\nfunction ChatWindow(props: { fnr: string }) {\n    const chat = useFetch<Array<{ from: string; content: string; }>>(`/modiapersonoversikt-chat/api/chat/${props.fnr}`);\n    const [text, setText] = useState('');\n    if (isPending(chat)) {\n        return <Spinner/>\n    } else if (hasError(chat)) {\n        return <p>Beklager, kunne ikke laste inn chat.</p>\n    }\n\n    const snakkebobler = chat.data\n        .map((melding, i) => (\n            <Snakkeboble key={i} pilHoyre={melding.from === 'nav'}>{melding.content}</Snakkeboble>\n        ));\n\n    return (\n        <div className=\"persontab__chatwindow\">\n            <div className=\"persontab__chatcontent\">\n                {snakkebobler}\n            </div>\n            <form>\n                <Textarea\n                    label=\"Enter for √• sende\"\n                    maxLength={0} value={text}\n                    onChange={(e) => {\n                        setText(e.target.value);\n                    }}\n                    onKeyUp={(e) => {\n                        if (e.keyCode === 13 && !e.shiftKey) {\n                            submit(props.fnr, text)\n                                .then(() => {\n                                    setText('');\n                                    chat.rerun();\n                                })\n                        }\n                    }}\n                />\n            </form>\n        </div>\n    );\n}\n\nexport default ChatWindow;\n","import * as React from 'react';\nimport './persontab.less';\nimport ChatWindow from \"./chatwindow\";\n\ninterface Props {\n    fnr: string;\n}\n\nfunction Persontab(props: Props) {\n    return (\n        <div className=\"persontab\">\n            <iframe className=\"persontab__persondata\" title={props.fnr} src={`https://navikt.github.io/modiapersonoversikt/#/person/${props.fnr}?chatvisning`}/>\n            <div className=\"persontab__chat\">\n                <ChatWindow fnr={props.fnr}/>\n            </div>\n        </div>\n    );\n}\n\nexport default Persontab;\n","import * as React from 'react';\nimport './tabviewer.less';\nimport Dashboard from \"../dashboard/dashboard\";\nimport {isPersonTab, Tab, TabId, TabsState, useTabs} from \"../../redux/tabs\";\nimport Persontab from \"../persontab/persontab\";\n\nfunction TabRenderer({ tab, activeTabId }: { tab: Tab, activeTabId: TabId}) {\n    const isInactive = tab.id !== activeTabId;\n    let content = undefined;\n    let tabClassName = undefined;\n    if (isPersonTab(tab)) {\n        tabClassName = 'tabviewer__persontab';\n        content = <Persontab fnr={tab.fnr} />;\n    } else {\n        tabClassName = 'tabviewer__dashboard';\n        content = <Dashboard />;\n    }\n\n    const className = ['tabviewer__tab', tabClassName, isInactive ? 'tabviewer__tab--inactive' : '']\n        .filter((cls) => cls.length > 0)\n        .join(' ');\n\n    return (\n        <div\n            key={tab.id}\n            className={className}\n            aria-hidden={isInactive}\n        >\n            {content}\n        </div>\n    );\n}\n\nfunction TabViewer() {\n    const tabState: TabsState = useTabs();\n    const tabs: Array<Tab> = Object.values<Tab>(tabState.tabs);\n\n    const tabElements = tabs.map((tab: Tab) => <TabRenderer key={tab.id} tab={tab} activeTabId={tabState.active} />);\n\n    return (\n        <div className=\"tabviewer\">\n            {tabElements}\n        </div>\n    )\n}\n\nexport default TabViewer;\n","import * as React from 'react';\nimport {TabsPure} from 'nav-frontend-tabs';\nimport 'nav-frontend-core';\nimport 'nav-frontend-typografi-style';\nimport Decorator from './components/decorator/decorator';\nimport TabViewer from \"./components/tabviewer/tabviewer\";\nimport {useAppDispatch} from \"./redux\";\nimport {isPersonTab, switchTab, Tab, TabsState, useTabs} from \"./redux/tabs\";\n\nfunction Application() {\n    const dispatch = useAppDispatch();\n    const tabState: TabsState = useTabs();\n    const tabs: Array<Tab> = Object.values<Tab>(tabState.tabs);\n    const activeTab = tabState.active;\n\n    const setTabIndex = (event: React.SyntheticEvent<EventTarget>, index: number) => {\n        dispatch(switchTab(tabs[index].id))\n    };\n\n    const tabselector = tabs.map((tab, i) => ({\n        label: isPersonTab(tab) ? tab.fnr : 'Dashboard',\n        aktiv: tab.id === activeTab\n    }));\n\n    return (\n        <>\n            <Decorator/>\n            <TabsPure tabs={tabselector} onChange={setTabIndex}/>\n            <TabViewer />\n        </>\n    );\n}\n\nexport default Application;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport './index.less';\nimport Application from './application';\nimport store from './redux';\n\nif (process.env.REACT_APP_MOCK_ENABLED === 'true') {\n    require('./mock');\n}\n\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <Application />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n","import FetchMock from 'yet-another-fetch-mock';\nimport { WebSocket, Server } from 'mock-websocket';\n\nexport const enheter = [\n    { enhetId: '0219', navn: 'NAV B√¶rum' },\n    { enhetId: '4100', navn: 'NKS' },\n    { enhetId: '0118', navn: 'NAV Aremark' },\n    { enhetId: '0604', navn: 'NAV Kongsberg' },\n    { enhetId: '0602', navn: 'NAV Drammer' }\n];\n\nexport function setupWsControlAndMock(mock: FetchMock) {\n    (window as any).WebSocket = WebSocket;\n    const contextServer = new Server('wss://veilederflatehendelser-q0.adeo.no/modiaeventdistribution/ws/Z999999');\n    contextServer.start();\n\n    const me = {\n        ident: 'Z999999',\n        navn: 'Fornavn Ettersen',\n        fornavn: 'Fornavn',\n        etternavn: 'Ettersen',\n        enheter: enheter\n    };\n\n    mock.get('/modiacontextholder/api/decorator', (req, res, ctx) => res(ctx.json(me)));\n    mock.get('https://app.adeo.no/modiacontextholder/api/decorator', (req, res, ctx) => res(ctx.json(me)));\n}\n","function rnd(start: number, end: number): number {\n    const delta = end - start;\n    const offset = Math.round(Math.random() * delta);\n    return start + offset;\n}\nexport function jittery(start: number, end: number, fn: () => void) {\n    const delay = rnd(start, end);\n\n    setTimeout(() => {\n        fn();\n        jittery(start, end, fn);\n    }, delay);\n}\n","import FetchMock from 'yet-another-fetch-mock';\nimport {Server, WebSocket} from 'mock-websocket';\nimport {godkjenteTemagrupper} from \"../utils/temagruppe-utils\";\nimport {guid} from \"nav-frontend-js-utils\";\nimport navfaker from \"nav-faker\";\nimport {jittery} from \"./utils\";\nimport {RequestEvent, WSEvent} from \"../components/dashboard/types\";\nimport {chatContent, followups, starters} from \"./index\";\n\nconst state: Array<RequestEvent> = new Array(30)\n    .fill(0)\n    .map(() => createRequest());\n\nfunction createRequest(): RequestEvent {\n    return {\n        type: \"REQUEST\",\n        time: new Date().toISOString(),\n        temagruppe: navfaker.random.arrayElement(godkjenteTemagrupper),\n        id: guid(),\n        fnr: navfaker.personIdentifikator.f√∏dselsnummer()\n    }\n}\n\nfunction publish(server: Server, content: WSEvent) {\n    const body = JSON.stringify(content);\n    server.send(body);\n}\n\nexport function setupControllWsMock(mock: FetchMock) {\n    (window as any).WebSocket = WebSocket;\n    const controlServer = new Server('wss://app-q0.adeo.no/modiapersonoversikt-chat/api/control-ws');\n    (window as any).controlServer = controlServer;\n\n    controlServer.on('connection', (ws) => {\n        ws.send(state[0]);\n    });\n\n    jittery(1000, 10000, () => {\n        const event: RequestEvent = {\n            type: \"REQUEST\",\n            time: new Date().toISOString(),\n            temagruppe: navfaker.random.arrayElement(godkjenteTemagrupper),\n            id: guid(),\n            fnr: navfaker.personIdentifikator.f√∏dselsnummer()\n        };\n\n        state.push(event);\n        publish(controlServer, event);\n\n        if (state.length > 50) {\n            const index = navfaker.random.integer(state.length - 1, 0);\n            const removed: RequestEvent = state.splice(index, 1)[0];\n            publish(controlServer, { type: 'CLOSE', time: new Date().toISOString(), id: removed.id });\n        }\n    });\n\n    mock.get('/modiapersonoversikt-chat/api/control', (req, res, ctx) => res(\n        ctx.json(state)\n    ));\n\n    mock.get('/modiapersonoversikt-chat/api/plukk/:id', (req, res, ctx) => {\n        const id = req.pathParams.id;\n        const chatRequest = state.find((request) => request.id === id);\n        if (chatRequest) {\n            chatContent[chatRequest.fnr] = [\n                { from: 'user', content: navfaker.random.arrayElement(starters) },\n                { from: 'user', content: navfaker.random.arrayElement(followups) }\n            ];\n\n            return res(ctx.json({ fnr: chatRequest.fnr }));\n        } else {\n            return res(ctx.status(404));\n        }\n    });\n}\n","import FetchMock, {MiddlewareUtils} from 'yet-another-fetch-mock';\nimport {setupWsControlAndMock} from './context-mock';\nimport navfaker from \"nav-faker\";\nimport {setupControllWsMock} from \"./dashboard-mock\";\nimport {guid} from \"nav-frontend-js-utils\";\n\nconsole.log('=========================='); // tslint:disable-line\nconsole.log('======== MED MOCK ========'); // tslint:disable-line\nconsole.log('=========================='); // tslint:disable-line\nconst mock = FetchMock.configure({\n    middleware: MiddlewareUtils.combine(\n        MiddlewareUtils.loggingMiddleware()\n    )\n});\n\nsetupWsControlAndMock(mock);\nsetupControllWsMock(mock);\n\nnavfaker.random.arrayElement([])\nexport const starters = [\n    'Hei,\\njeg har ett lite sp√∏rsm√•l.',\n    'God dagen. Kunne jeg stilt ett lite sp√∏rsm√•l?',\n    'Skjera!! Kan dere ta kontakt med meg.'\n];\nexport const followups = [\n    'Det jeg lurer p√• er ang√•ende AAP',\n    'Hvordan er egentlig greia med dagpenger n√• om dagen',\n    'Corona er skummelt og jeg lurer p√• hva jeg skal gj√∏re.'\n];\n\nexport const ekstra = [\n    'Fint og flott. Er det det samme med andre ytelser ogs√•?',\n    'Hvordan blir dette om jeg ogs√• er selvstendig n√¶ringsdrivende? P√•virker det noe?',\n    'Jeg forst√•r. Stor fare for at jeg blir permittert i l√∏pet av h√∏sten. Vil det endre noe?'\n];\n\nexport const chatContent: any = {};\nmock.get('/modiapersonoversikt-chat/api/plukk', (req, res, ctx) => {\n    const fnr = navfaker.personIdentifikator.f√∏dselsnummer();\n    chatContent[fnr] = [\n        { from: 'user', content: navfaker.random.arrayElement(starters) },\n        { from: 'user', content: navfaker.random.arrayElement(followups) }\n    ];\n\n    return res(ctx.json({ fnr, id: guid() }));\n});\n\n\nmock.get('/modiapersonoversikt-chat/api/chat/:fnr', (req, res, ctx) => res(\n    ctx.json(chatContent[req.pathParams.fnr])\n));\n\nmock.post('/modiapersonoversikt-chat/api/chat/:fnr/send', (req, res, ctx) => {\n    const content = chatContent[req.pathParams.fnr] || [];\n    content.push({ from: 'nav', content: req.body });\n    content.push({ from: 'user', content: navfaker.random.arrayElement(ekstra) });\n    chatContent[req.pathParams.fnr] = content;\n\n    return res(\n        ctx.json(content)\n    );\n});\n","export enum Temagruppe {\n    Arbeid = 'ARBD',\n    Familie = 'FMLI',\n    Hjelpemiddel = 'HJLPM',\n    Bil = 'BIL',\n    OrtopediskHjelpemiddel = 'ORT_HJE',\n    Ovrig = 'OVRG',\n    Pensjon = 'PENS',\n    PleiepengerSyktBarn = 'PLEIEPENGERSY',\n    Uforetrygd = 'UFRT',\n    Utland = 'UTLAND',\n    AndreSosiale = 'ANSOS',\n    OkonomiskSosial = 'OKSOS'\n}\n\nexport const temagruppeNavn = {\n    [Temagruppe.Arbeid]: \"Arbeid\",\n    [Temagruppe.Familie]: \"Familie\",\n    [Temagruppe.Hjelpemiddel]: \"Hjelpemidler\",\n    [Temagruppe.Bil]: \"Hjelpemidler bil\",\n    [Temagruppe.OrtopediskHjelpemiddel]: \"Ortopediske hjelpemidler\",\n    [Temagruppe.Pensjon]: \"Pensjon\",\n    [Temagruppe.PleiepengerSyktBarn]: \"Pleiepenger sykt barn\",\n    [Temagruppe.Uforetrygd]: \"Uf√∏retrygd\",\n    [Temagruppe.Utland]: \"Utland\",\n    [Temagruppe.OkonomiskSosial]: \"√òkonomisk sosialhjelp\",\n    [Temagruppe.AndreSosiale]: \"Andre sosiale tjenester\",\n    [Temagruppe.Ovrig]: \"√òvrige henvendelser\"\n};\n\nexport const godkjenteTemagrupper = [\n    Temagruppe.Arbeid,\n    Temagruppe.Familie,\n    Temagruppe.Hjelpemiddel,\n    Temagruppe.Pensjon,\n    Temagruppe.Ovrig\n];\n\nexport function temagruppeTekst(temagruppe: Temagruppe): string {\n    return temagruppeNavn[temagruppe] ?? \"Ukjent temagruppe\";\n}\n"],"sourceRoot":""}